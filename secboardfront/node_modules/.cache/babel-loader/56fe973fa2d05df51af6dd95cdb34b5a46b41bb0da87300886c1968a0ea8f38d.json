{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport api from \"@/api/APIs\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'Add-new-post',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const myToken = window.sessionStorage.getItem(\"token\");\n    const myName = window.sessionStorage.getItem(\"name\");\n    const postTitle = ref();\n    const postContent = ref();\n    const postFile = ref();\n    const postForm = reactive({\n      title: postTitle.value,\n      content: postContent.value,\n      token: myToken,\n      name: myName,\n      file: postFile\n    });\n    function goSavePost() {\n      if (postTitle.value === \"\" || postTitle.value === undefined || postContent.value === \"\" || postContent.value === undefined) {\n        ElMessage({\n          message: \"Title or Content cannot be empty\",\n          type: \"warning\"\n        });\n      } else {\n        postForm.title = postTitle.value;\n        postForm.content = postContent.value;\n        api.addPost(postForm).then(res => {\n          if (res.status === 201) {\n            ElMessage({\n              message: \"Done!\",\n              type: \"success\"\n            });\n            router.push({\n              path: \"/home\"\n            });\n          }\n        });\n      }\n    }\n    function goCancelAddNewPost() {\n      router.push({\n        path: \"/home/my_posts\"\n      });\n    }\n    function onFileChange() {\n      const file = this.$refs.file.files[0];\n      this.file = file;\n      console.log();\n    }\n    const __returned__ = {\n      router,\n      myToken,\n      myName,\n      postTitle,\n      postContent,\n      postFile,\n      postForm,\n      goSavePost,\n      goCancelAddNewPost,\n      onFileChange,\n      reactive,\n      ref,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get api() {\n        return api;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","ElMessage","api","useRouter","router","myToken","window","sessionStorage","getItem","myName","postTitle","postContent","postFile","postForm","title","value","content","token","name","file","goSavePost","undefined","message","type","addPost","then","res","status","push","path","goCancelAddNewPost","onFileChange","$refs","files","console","log"],"sources":["C:/Users/Realm/OneDrive/Documents/GitHub/CSIT321-SecBoard/secboardfront/src/components/HomepageComponents/Add-new-post.vue"],"sourcesContent":["<template>\r\n\t<div style=\"flex: 1; display: flex; flex-direction: column\">\r\n\t\t<div style=\"display: flex; justify-content: space-between; margin: 10px\">\r\n\t\t\t<div @click=\"goCancelAddNewPost\" style=\"height: 50px; width: 50px; cursor: pointer\">\r\n\t\t\t\t<img src=\"../../../public/close-outline.svg\" />\r\n\t\t\t</div>\r\n\t\t\t<div @click=\"goSavePost\" class=\"save-post-button\" style=\"display: flex; justify-content: center; align-items: center; margin-right: 20px; border-radius: 5px; cursor: pointer\">\r\n\t\t\t\t<strong style=\"width: 100px; color: white; font-size: 1.2em; font-weight: bold; border-radius: 5px; text-align: center\">Save</strong>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div style=\"flex: 1; display: flex; flex-direction: column\">\r\n\t\t\t\r\n\t\t\t<div style=\"height: 150px; padding: 30px\">\r\n\t\t\t\t<strong>Select files</strong><br/>\r\n                <input type=\"file\" ref =\"postFile\" @change=\"onFileChange\"/>\r\n\t\t\t\t<input v-model=\"postTitle\" placeholder=\"Title\" style=\"height: 100%; width: 100%; border: none; outline: none; background-color: #f7e4de; font-size: 2.8em; font-weight: bold\" /></div>\r\n\t\t\t<div style=\"flex: 1; padding: 0 30px 30px 30px\">\r\n\t\t\t\t<textarea v-model=\"postContent\" placeholder=\"Content\" style=\"resize: none; height: 100%; width: 100%; background-color: #f7e4de; border: none; outline: none; font-size: 1.8em\"></textarea>\r\n\t\t\t</div>\r\n\t\t\t<!-- <textarea placeholder=\"New note\" style=\"resize: none; height: 100%; width: 100%; background-color: #f7e4de; border: none; outline: none; padding: 50px; font-size: 2.3em\"></textarea> -->\r\n\t\t</div>\r\n\t\t<div style=\"position: relative; height: 80px; display: flex; border-top: 1px solid gray\">\r\n\t\t\t<div class=\"currently-not-available\">\r\n\t\t\t\t<strong>Changing font style is currently not available</strong>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"flex: 1; display: flex; justify-content: center; align-items: center\">\r\n\t\t\t\t<strong style=\"margin-right: 20px; font-weight: 900\">B</strong>\r\n\t\t\t\t<span style=\"margin-right: 20px; text-decoration: underline\">U</span>\r\n\t\t\t\t<span>/</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div style=\"flex: 1; display: flex; justify-content: center; align-items: center\">\r\n\t\t\t\t<strong style=\"margin-right: 20px\">H1</strong>\r\n\t\t\t\t<strong style=\"margin-right: 20px\">H2</strong>\r\n\t\t\t\t<strong style=\"margin-right: 20px\">H3</strong>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div style=\"flex: 1; display: flex; justify-content: center; align-items: center\">\r\n\t\t\t\t<div style=\"margin-right: 20px; height: 30px; width: 30px; border-radius: 50%; background-color: lightcoral\"></div>\r\n\t\t\t\t<div style=\"margin-right: 20px; height: 30px; width: 30px; border-radius: 50%; background-color: lightcyan\"></div>\r\n\t\t\t\t<div style=\"margin-right: 20px; height: 30px; width: 30px; border-radius: 50%; background-color: lightgoldenrodyellow\"></div>\r\n\t\t\t\t<div style=\"margin-right: 20px; height: 30px; width: 30px; border-radius: 50%; background-color: lightsalmon\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport api from \"@/api/APIs\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter();\r\n\r\nconst myToken = window.sessionStorage.getItem(\"token\");\r\nconst myName = window.sessionStorage.getItem(\"name\");\r\n\r\nconst postTitle = ref();\r\nconst postContent = ref();\r\nconst postFile = ref();\r\nconst postForm = reactive({\r\n\ttitle: postTitle.value,\r\n\tcontent: postContent.value,\r\n\ttoken: myToken,\r\n\tname: myName,\r\n\tfile:postFile,\r\n});\r\nfunction goSavePost() {\r\n\tif (postTitle.value === \"\" || postTitle.value === undefined || postContent.value === \"\" || postContent.value === undefined) {\r\n\t\tElMessage({\r\n\t\t\tmessage: \"Title or Content cannot be empty\",\r\n\t\t\ttype: \"warning\",\r\n\t\t});\r\n\t} else {\r\n\t\tpostForm.title = postTitle.value;\r\n\t\tpostForm.content = postContent.value;\r\n\t\tapi.addPost(postForm).then((res) => {\r\n\t\t\tif (res.status === 201) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"Done!\",\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t});\r\n\t\t\t\trouter.push({ path: \"/home\" });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction goCancelAddNewPost() {\r\n\trouter.push({ path: \"/home/my_posts\" });\r\n}\r\n\r\nfunction onFileChange(){\r\n\tconst file = this.$refs.file.files[0];\r\n\tthis.file=file;\r\n\tconsole.log();\r\n}\r\n</script>\r\n\r\n<style>\r\n.save-post-button {\r\n\tbackground-color: #0c3f51;\r\n}\r\n.save-post-button:hover {\r\n\tbackground-color: #072733;\r\n}\r\n.currently-not-available {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tcolor: white;\r\n\tfont-size: 2em;\r\n\tposition: absolute;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tbackground-color: rgba(80, 78, 78, 0.573);\r\n}\r\n</style>\r\n"],"mappings":";AAgDA,SAASA,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AACnC,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,GAAG,MAAM,YAAY;AAC5B,SAASC,SAAS,QAAQ,YAAY;;;;;;;IACtC,MAAMC,MAAM,GAAGD,SAAS,EAAE;IAE1B,MAAME,OAAO,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;IACtD,MAAMC,MAAM,GAAGH,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;IAEpD,MAAME,SAAS,GAAGV,GAAG,EAAE;IACvB,MAAMW,WAAW,GAAGX,GAAG,EAAE;IACzB,MAAMY,QAAQ,GAAGZ,GAAG,EAAE;IACtB,MAAMa,QAAQ,GAAGd,QAAQ,CAAC;MACzBe,KAAK,EAAEJ,SAAS,CAACK,KAAK;MACtBC,OAAO,EAAEL,WAAW,CAACI,KAAK;MAC1BE,KAAK,EAAEZ,OAAO;MACda,IAAI,EAAET,MAAM;MACZU,IAAI,EAACP;IACN,CAAC,CAAC;IACF,SAASQ,UAAUA,CAAA,EAAG;MACrB,IAAIV,SAAS,CAACK,KAAK,KAAK,EAAE,IAAIL,SAAS,CAACK,KAAK,KAAKM,SAAS,IAAIV,WAAW,CAACI,KAAK,KAAK,EAAE,IAAIJ,WAAW,CAACI,KAAK,KAAKM,SAAS,EAAE;QAC3HpB,SAAS,CAAC;UACTqB,OAAO,EAAE,kCAAkC;UAC3CC,IAAI,EAAE;QACP,CAAC,CAAC;MACH,CAAC,MAAM;QACNV,QAAQ,CAACC,KAAK,GAAGJ,SAAS,CAACK,KAAK;QAChCF,QAAQ,CAACG,OAAO,GAAGL,WAAW,CAACI,KAAK;QACpCb,GAAG,CAACsB,OAAO,CAACX,QAAQ,CAAC,CAACY,IAAI,CAAEC,GAAG,IAAK;UACnC,IAAIA,GAAG,CAACC,MAAM,KAAK,GAAG,EAAE;YACvB1B,SAAS,CAAC;cACTqB,OAAO,EAAE,OAAO;cAChBC,IAAI,EAAE;YACP,CAAC,CAAC;YACFnB,MAAM,CAACwB,IAAI,CAAC;cAAEC,IAAI,EAAE;YAAQ,CAAC,CAAC;UAC/B;QACD,CAAC,CAAC;MACH;IACD;IACA,SAASC,kBAAkBA,CAAA,EAAG;MAC7B1B,MAAM,CAACwB,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAiB,CAAC,CAAC;IACxC;IAEA,SAASE,YAAYA,CAAA,EAAE;MACtB,MAAMZ,IAAI,GAAG,IAAI,CAACa,KAAK,CAACb,IAAI,CAACc,KAAK,CAAC,CAAC,CAAC;MACrC,IAAI,CAACd,IAAI,GAACA,IAAI;MACde,OAAO,CAACC,GAAG,EAAE;IACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}