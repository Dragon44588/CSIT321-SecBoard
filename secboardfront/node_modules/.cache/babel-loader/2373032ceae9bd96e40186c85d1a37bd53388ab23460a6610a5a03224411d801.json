{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref } from \"vue\";\nimport api from \"@/api/APIs\";\nimport { ElMessage } from \"element-plus\";\nimport { useRouter } from \"vue-router\";\nimport { QuillEditor } from \"@vueup/vue-quill\";\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\nimport \"@vueup/vue-quill/dist/vue-quill.bubble.css\";\nexport default {\n  __name: 'My_posts',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const myPostsList = ref();\n    const postContent = ref();\n    const postTitle = ref();\n    const mytoken = window.sessionStorage.getItem(\"token\");\n    const myname = window.sessionStorage.getItem(\"name\");\n    const authForm = reactive({\n      token: mytoken,\n      name: myname\n    });\n    const sendToDatabase = reactive({\n      post_id: null,\n      title: postTitle.value,\n      content: postContent.value,\n      token: mytoken,\n      name: myname\n    });\n    api.getMyPostsApi(authForm).then(res => {\n      myPostsList.value = res.myPosts;\n    });\n    function goAddNewPost() {\n      router.push({\n        path: \"/home/add-new-post\"\n      });\n    }\n    function requestDelete(mpl) {\n      sendToDatabase.post_id = mpl.post_id;\n      sendToDatabase.title = mpl.title;\n      sendToDatabase.content = mpl.content;\n      api.addDeleteRequest(sendToDatabase).then(res => {\n        if (res.status === 201) {\n          ElMessage({\n            message: \"Done!\",\n            type: \"success\"\n          });\n          router.push({\n            path: \"/home\"\n          });\n        }\n      });\n    }\n    function requestEdit(mpl) {\n      window.sessionStorage.setItem(\"current_editing\", JSON.stringify(mpl));\n      router.push({\n        path: \"/home/edit_post\"\n      });\n\n      // sendToDatabase.post_id = mpl.post_id;\n      // sendToDatabase.title = mpl.title;\n      // sendToDatabase.content = mpl.content;\n      // api.addEditRequest(sendToDatabase).then((res) => {\n      // \tif (res.status === 201) {\n      // \t\tElMessage({\n      // \t\t\tmessage: \"Done!\",\n      // \t\t\ttype: \"success\",\n      // \t\t});\n      // \t\trouter.push({ path: \"/home\" });\n      // \t}\n      // });\n    }\n\n    const editorOptions = {\n      readOnly: true,\n      theme: \"bubble\"\n    };\n    const __returned__ = {\n      router,\n      myPostsList,\n      postContent,\n      postTitle,\n      mytoken,\n      myname,\n      authForm,\n      sendToDatabase,\n      goAddNewPost,\n      requestDelete,\n      requestEdit,\n      editorOptions,\n      reactive,\n      ref,\n      get api() {\n        return api;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get QuillEditor() {\n        return QuillEditor;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","api","ElMessage","useRouter","QuillEditor","router","myPostsList","postContent","postTitle","mytoken","window","sessionStorage","getItem","myname","authForm","token","name","sendToDatabase","post_id","title","value","content","getMyPostsApi","then","res","myPosts","goAddNewPost","push","path","requestDelete","mpl","addDeleteRequest","status","message","type","requestEdit","setItem","JSON","stringify","editorOptions","readOnly","theme"],"sources":["C:/Users/Azza/Desktop/CSIT321/CSIT321-SecBoard/secboardfront/src/components/HomepageComponents/My_posts.vue"],"sourcesContent":["<template>\r\n\t<div style=\"height: 20%; display: flex; align-items: center\">\r\n\t\t<h1 style=\"margin-left: 50px; font-size: 3em; font-weight: bold\">My Posts</h1>\r\n\t</div>\r\n\t<div style=\"flex: 1\">\r\n\t\t<div style=\"background-color: white; min-height: 500px; margin: 20px 20px 20px 50px; border-radius: 5px\">\r\n\t\t\t<ul style=\"display: grid; grid-template-columns: repeat(3, minmax(350px, 35%)); grid-auto-rows: 350px\">\r\n\t\t\t\t<li v-for=\"(mpl, index) in myPostsList\" :key=\"index\" :style=\"{ backgroundColor: mpl.background_color }\" style=\"height: 300px; margin: 20px; border-radius: 5px; padding: 10px 10px 100px 10px; overflow: hidden\">\r\n\t\t\t\t\t<div style=\"display: flex; justify-content: flex-end\">\r\n\t\t\t\t\t\t<div style=\"display: flex; justify-content: center\">\r\n\t\t\t\t\t\t\t<div @click=\"requestEdit(mpl)\" style=\"margin-right: 10px; color: rgb(77, 76, 76); cursor: pointer\">\r\n\t\t\t\t\t\t\t\t<h4>Edit</h4>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"cursor: pointer\">\r\n\t\t\t\t\t\t\t\t<img @click=\"requestDelete(mpl)\" style=\"height: 20px; width: 20px\" src=\"../../../public/trash.svg\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p style=\"font-weight: bold; font-size: 2em\">{{ mpl.title }}</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tBy: <strong>{{ mpl.user_name }}</strong> on <strong>{{ mpl.timestamp }}</strong>\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<QuillEditor v-model:content=\"mpl.content.ops\" theme=\"bubble\" :options=\"editorOptions\" />\r\n\t\t\t\t</li>\r\n\t\t\t\t<li @click=\"goAddNewPost\" class=\"add-post-button\" style=\"height: 300px; margin: 20px; border-radius: 5px; display: flex; justify-content: center; align-items: center; cursor: pointer\">\r\n\t\t\t\t\t<div style=\"padding: 15px\">\r\n\t\t\t\t\t\t<img style=\"height: 100px; width: 100px\" src=\"../../../public/add-outline.svg\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from \"vue\";\r\nimport api from \"@/api/APIs\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { QuillEditor } from \"@vueup/vue-quill\";\r\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\r\nimport \"@vueup/vue-quill/dist/vue-quill.bubble.css\";\r\n\r\nconst router = useRouter();\r\nconst myPostsList = ref();\r\nconst postContent = ref();\r\nconst postTitle = ref();\r\n\r\nconst mytoken = window.sessionStorage.getItem(\"token\");\r\nconst myname = window.sessionStorage.getItem(\"name\");\r\n\r\nconst authForm = reactive({\r\n\ttoken: mytoken,\r\n\tname: myname,\r\n});\r\n\r\nconst sendToDatabase = reactive({\r\n\tpost_id: null,\r\n\ttitle: postTitle.value,\r\n\tcontent: postContent.value,\r\n\ttoken: mytoken,\r\n\tname: myname,\r\n});\r\n\r\napi.getMyPostsApi(authForm).then((res) => {\r\n\tmyPostsList.value = res.myPosts;\r\n});\r\n\r\nfunction goAddNewPost() {\r\n\trouter.push({ path: \"/home/add-new-post\" });\r\n}\r\n\r\nfunction requestDelete(mpl) {\r\n\tsendToDatabase.post_id = mpl.post_id;\r\n\tsendToDatabase.title = mpl.title;\r\n\tsendToDatabase.content = mpl.content;\r\n\tapi.addDeleteRequest(sendToDatabase).then((res) => {\r\n\t\tif (res.status === 201) {\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: \"Done!\",\r\n\t\t\t\ttype: \"success\",\r\n\t\t\t});\r\n\t\t\trouter.push({ path: \"/home\" });\r\n\t\t}\r\n\t});\r\n}\r\nfunction requestEdit(mpl) {\r\n\twindow.sessionStorage.setItem(\"current_editing\", JSON.stringify(mpl));\r\n\trouter.push({ path: \"/home/edit_post\" });\r\n\r\n\t// sendToDatabase.post_id = mpl.post_id;\r\n\t// sendToDatabase.title = mpl.title;\r\n\t// sendToDatabase.content = mpl.content;\r\n\t// api.addEditRequest(sendToDatabase).then((res) => {\r\n\t// \tif (res.status === 201) {\r\n\t// \t\tElMessage({\r\n\t// \t\t\tmessage: \"Done!\",\r\n\t// \t\t\ttype: \"success\",\r\n\t// \t\t});\r\n\t// \t\trouter.push({ path: \"/home\" });\r\n\t// \t}\r\n\t// });\r\n}\r\nconst editorOptions = {\r\n\treadOnly: true,\r\n\ttheme: \"bubble\",\r\n};\r\n</script>\r\n\r\n<style scope>\r\n.add-post-button {\r\n\tbackground-color: lightgrey;\r\n}\r\n.add-post-button:hover {\r\n\tbackground-color: rgb(143, 142, 142);\r\n}\r\n.btn {\r\n\tborder: 1px solid black;\r\n\tbackground-color: white;\r\n\tcolor: black;\r\n\tpadding: 14px 28px;\r\n\tfont-size: 16px;\r\n\tcursor: pointer;\r\n}\r\n.delete {\r\n\tbackground-color: #992c2c;\r\n\tborder: 0px solid black;\r\n\ttext-align: center;\r\n\twidth: 47%;\r\n}\r\n.delete:hover {\r\n\tbackground-color: #872424;\r\n}\r\n</style>\r\n"],"mappings":";AAqCA,SAASA,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AACnC,OAAOC,GAAG,MAAM,YAAY;AAC5B,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,0CAA0C;AACjD,OAAO,4CAA4C;;;;;;;IAEnD,MAAMC,MAAM,GAAGF,SAAS,EAAE;IAC1B,MAAMG,WAAW,GAAGN,GAAG,EAAE;IACzB,MAAMO,WAAW,GAAGP,GAAG,EAAE;IACzB,MAAMQ,SAAS,GAAGR,GAAG,EAAE;IAEvB,MAAMS,OAAO,GAAGC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;IACtD,MAAMC,MAAM,GAAGH,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;IAEpD,MAAME,QAAQ,GAAGf,QAAQ,CAAC;MACzBgB,KAAK,EAAEN,OAAO;MACdO,IAAI,EAAEH;IACP,CAAC,CAAC;IAEF,MAAMI,cAAc,GAAGlB,QAAQ,CAAC;MAC/BmB,OAAO,EAAE,IAAI;MACbC,KAAK,EAAEX,SAAS,CAACY,KAAK;MACtBC,OAAO,EAAEd,WAAW,CAACa,KAAK;MAC1BL,KAAK,EAAEN,OAAO;MACdO,IAAI,EAAEH;IACP,CAAC,CAAC;IAEFZ,GAAG,CAACqB,aAAa,CAACR,QAAQ,CAAC,CAACS,IAAI,CAAEC,GAAG,IAAK;MACzClB,WAAW,CAACc,KAAK,GAAGI,GAAG,CAACC,OAAO;IAChC,CAAC,CAAC;IAEF,SAASC,YAAYA,CAAA,EAAG;MACvBrB,MAAM,CAACsB,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAqB,CAAC,CAAC;IAC5C;IAEA,SAASC,aAAaA,CAACC,GAAG,EAAE;MAC3Bb,cAAc,CAACC,OAAO,GAAGY,GAAG,CAACZ,OAAO;MACpCD,cAAc,CAACE,KAAK,GAAGW,GAAG,CAACX,KAAK;MAChCF,cAAc,CAACI,OAAO,GAAGS,GAAG,CAACT,OAAO;MACpCpB,GAAG,CAAC8B,gBAAgB,CAACd,cAAc,CAAC,CAACM,IAAI,CAAEC,GAAG,IAAK;QAClD,IAAIA,GAAG,CAACQ,MAAM,KAAK,GAAG,EAAE;UACvB9B,SAAS,CAAC;YACT+B,OAAO,EAAE,OAAO;YAChBC,IAAI,EAAE;UACP,CAAC,CAAC;UACF7B,MAAM,CAACsB,IAAI,CAAC;YAAEC,IAAI,EAAE;UAAQ,CAAC,CAAC;QAC/B;MACD,CAAC,CAAC;IACH;IACA,SAASO,WAAWA,CAACL,GAAG,EAAE;MACzBpB,MAAM,CAACC,cAAc,CAACyB,OAAO,CAAC,iBAAiB,EAAEC,IAAI,CAACC,SAAS,CAACR,GAAG,CAAC,CAAC;MACrEzB,MAAM,CAACsB,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAkB,CAAC,CAAC;;MAExC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACD;;IACA,MAAMW,aAAa,GAAG;MACrBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE;IACR,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}