{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onBeforeMount, onMounted, reactive, ref } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport api from \"@/api/APIs\";\nimport { useRouter } from \"vue-router\";\nimport { QuillEditor, Quill } from \"@vueup/vue-quill\";\nimport ImageResize from \"quill-image-resize-vue\"; // Note, this doesn't use deconstruction\nimport { ImageDrop } from \"quill-image-drop-module\";\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\nexport default {\n  __name: 'Edit_A_Post',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const myToken = window.sessionStorage.getItem(\"token\");\n    const myName = window.sessionStorage.getItem(\"name\");\n    const post_color_list = ref([\"lightgoldenrodyellow\", \"lightcoral\", \"lightcyan\", \"lightsalmon\"]);\n    const current_post_color = ref(post_color_list.value[0]);\n    function handle_post_color(color) {\n      return {\n        backgroundColor: color,\n        border: color === current_post_color.value ? \"1px solid black\" : \"none\"\n      };\n    }\n    const origin_post = JSON.parse(window.sessionStorage.getItem(\"current_editing\"));\n    const rich_text = ref(\"\");\n    const quill_rich = ref();\n    const postTitle = ref();\n    const postForm = reactive({\n      title: \"\",\n      content: \"\",\n      post_color: \"\",\n      origin_title: \"\",\n      origin_content: \"\",\n      origin_post_color: \"\",\n      token: myToken,\n      name: myName,\n      post_id: \"\"\n    });\n    onBeforeMount(() => {\n      postTitle.value = origin_post.title;\n      current_post_color.value = origin_post.background_color;\n    });\n    onMounted(() => {\n      let q = quill_rich.value.getQuill();\n      q.setContents(origin_post.content);\n      // quill_rich.value.setContents(origin_post.content);\n    });\n\n    function goSavePost() {\n      if (rich_text.value === undefined) {\n        ElMessage({\n          message: \"Title or Content cannot be empty\",\n          type: \"warning\"\n        });\n        return;\n      }\n      const text = rich_text.value.map(op => op.insert).join(\"\");\n      if (text === \"\") {\n        ElMessage({\n          message: \"Title or Content cannot be empty\",\n          type: \"warning\"\n        });\n      } else {\n        postForm.title = postTitle.value;\n        postForm.content = rich_text.value;\n        postForm.post_color = current_post_color.value;\n        postForm.origin_title = origin_post.title;\n        postForm.origin_content = origin_post.content;\n        postForm.origin_post_color = origin_post.background_color;\n        postForm.post_id = origin_post.post_id;\n        api.addEditRequest(postForm).then(res => {\n          if (res.status === 201) {\n            ElMessage({\n              message: \"Done!\",\n              type: \"success\"\n            });\n            router.push({\n              path: \"/home\"\n            });\n          }\n        });\n      }\n    }\n    function goCancelAddNewPost() {\n      router.push({\n        path: \"/home/my_posts\"\n      });\n    }\n    Quill.register(\"modules/imageResize\", ImageResize);\n    Quill.register(\"modules/imageDrop\", ImageDrop);\n    const customToolbarOptions = [[\"bold\", \"italic\", \"underline\", \"strike\"], [\"blockquote\", \"code-block\"], [{\n      header: 1\n    }, {\n      header: 2\n    }], [{\n      list: \"ordered\"\n    }, {\n      list: \"bullet\"\n    }], [{\n      script: \"sub\"\n    }, {\n      script: \"super\"\n    }], [{\n      indent: \"-1\"\n    }, {\n      indent: \"+1\"\n    }], [{\n      direction: \"rtl\"\n    }], [{\n      size: [\"small\", false, \"large\", \"huge\"]\n    }], [{\n      header: [1, 2, 3, 4, 5, 6, false]\n    }], [{\n      color: []\n    }, {\n      background: []\n    }], [{\n      font: []\n    }], [{\n      align: []\n    }], [\"link\", \"image\", \"video\"],\n    // Add image and video options\n    [\"clean\"]];\n    const editor_options = {\n      modules: {\n        imageResize: {\n          displaySize: true\n        },\n        imageDrop: {}\n      }\n    };\n    const __returned__ = {\n      router,\n      myToken,\n      myName,\n      post_color_list,\n      current_post_color,\n      handle_post_color,\n      origin_post,\n      rich_text,\n      quill_rich,\n      postTitle,\n      postForm,\n      goSavePost,\n      goCancelAddNewPost,\n      customToolbarOptions,\n      editor_options,\n      onBeforeMount,\n      onMounted,\n      reactive,\n      ref,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get api() {\n        return api;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get QuillEditor() {\n        return QuillEditor;\n      },\n      get Quill() {\n        return Quill;\n      },\n      get ImageResize() {\n        return ImageResize;\n      },\n      get ImageDrop() {\n        return ImageDrop;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onBeforeMount","onMounted","reactive","ref","ElMessage","api","useRouter","QuillEditor","Quill","ImageResize","ImageDrop","router","myToken","window","sessionStorage","getItem","myName","post_color_list","current_post_color","value","handle_post_color","color","backgroundColor","border","origin_post","JSON","parse","rich_text","quill_rich","postTitle","postForm","title","content","post_color","origin_title","origin_content","origin_post_color","token","name","post_id","background_color","q","getQuill","setContents","goSavePost","undefined","message","type","text","map","op","insert","join","addEditRequest","then","res","status","push","path","goCancelAddNewPost","register","customToolbarOptions","header","list","script","indent","direction","size","background","font","align","editor_options","modules","imageResize","displaySize","imageDrop"],"sources":["/Users/xxxandre/UOW_Related/CSIT321_Project/github/github2/secboardfront/src/components/HomepageComponents/Edit_A_Post.vue"],"sourcesContent":["<template>\n\t<div style=\"flex: 1; display: flex; flex-direction: column\">\n\t\t<div style=\"display: flex; justify-content: space-between; margin: 10px\">\n\t\t\t<div @click=\"goCancelAddNewPost\" style=\"height: 50px; width: 50px; cursor: pointer\">\n\t\t\t\t<img src=\"../../../public/close-outline.svg\" />\n\t\t\t</div>\n\t\t\t<div style=\"flex: 1; display: flex; justify-content: center; align-items: center; color: rgb(68, 68, 68)\">\n\t\t\t\t<h1>EDITING A POST</h1>\n\t\t\t</div>\n\t\t\t<div style=\"justify-content: flex-end; align-items: center; display: flex\">\n\t\t\t\t<strong style=\"margin-right: 10px\">Post Color</strong>\n\t\t\t\t<ul style=\"display: flex\">\n\t\t\t\t\t<li v-for=\"(color, index) in post_color_list\" :key=\"index\">\n\t\t\t\t\t\t<div @click=\"current_post_color = color\" style=\"margin-right: 10px; height: 30px; width: 30px; border-radius: 50%; cursor: pointer\" :style=\"handle_post_color(color)\"></div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div @click=\"goSavePost\" class=\"save-post-button\" style=\"display: flex; justify-content: center; align-items: center; margin-right: 20px; border-radius: 5px; cursor: pointer\">\n\t\t\t\t<strong style=\"width: 100px; color: white; font-size: 1.2em; font-weight: bold; border-radius: 5px; text-align: center\">Apply Change</strong>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div style=\"flex: 1; display: flex; flex-direction: column\">\n\t\t\t<div style=\"height: 150px; padding: 30px\">\n\t\t\t\t<input v-model=\"postTitle\" placeholder=\"Title\" style=\"height: 100%; width: 100%; border: none; outline: none; background-color: #f7e4de; font-size: 2.8em; font-weight: bold\" />\n\t\t\t</div>\n\n\t\t\t<div style=\"flex: 1; padding: 30px\">\n\t\t\t\t<p style=\"margin-bottom: 10px; color: rgb(80, 80, 80); font-size: 1.5em\">Content</p>\n\n\t\t\t\t<QuillEditor ref=\"quill_rich\" style=\"height: 80%\" v-model:content=\"rich_text\" theme=\"snow\" contentType=\"delta\" :toolbar=\"customToolbarOptions\" :options=\"editor_options\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { onBeforeMount, onMounted, reactive, ref } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport api from \"@/api/APIs\";\nimport { useRouter } from \"vue-router\";\nconst router = useRouter();\n\nconst myToken = window.sessionStorage.getItem(\"token\");\nconst myName = window.sessionStorage.getItem(\"name\");\n\nconst post_color_list = ref([\"lightgoldenrodyellow\", \"lightcoral\", \"lightcyan\", \"lightsalmon\"]);\nconst current_post_color = ref(post_color_list.value[0]);\n\nfunction handle_post_color(color) {\n\treturn {\n\t\tbackgroundColor: color,\n\t\tborder: color === current_post_color.value ? \"1px solid black\" : \"none\",\n\t};\n}\n\nconst origin_post = JSON.parse(window.sessionStorage.getItem(\"current_editing\"));\nconst rich_text = ref(\"\");\nconst quill_rich = ref();\nconst postTitle = ref();\nconst postForm = reactive({\n\ttitle: \"\",\n\tcontent: \"\",\n\tpost_color: \"\",\n\torigin_title: \"\",\n\torigin_content: \"\",\n\torigin_post_color: \"\",\n\ttoken: myToken,\n\tname: myName,\n\tpost_id: \"\",\n});\n\nonBeforeMount(() => {\n\tpostTitle.value = origin_post.title;\n\tcurrent_post_color.value = origin_post.background_color;\n});\nonMounted(() => {\n\tlet q = quill_rich.value.getQuill();\n\tq.setContents(origin_post.content);\n\t// quill_rich.value.setContents(origin_post.content);\n});\n\nfunction goSavePost() {\n\tif (rich_text.value === undefined) {\n\t\tElMessage({\n\t\t\tmessage: \"Title or Content cannot be empty\",\n\t\t\ttype: \"warning\",\n\t\t});\n\t\treturn;\n\t}\n\n\tconst text = rich_text.value.map((op) => op.insert).join(\"\");\n\n\tif (text === \"\") {\n\t\tElMessage({\n\t\t\tmessage: \"Title or Content cannot be empty\",\n\t\t\ttype: \"warning\",\n\t\t});\n\t} else {\n\t\tpostForm.title = postTitle.value;\n\t\tpostForm.content = rich_text.value;\n\t\tpostForm.post_color = current_post_color.value;\n\t\tpostForm.origin_title = origin_post.title;\n\t\tpostForm.origin_content = origin_post.content;\n\t\tpostForm.origin_post_color = origin_post.background_color;\n\t\tpostForm.post_id = origin_post.post_id;\n\t\tapi.addEditRequest(postForm).then((res) => {\n\t\t\tif (res.status === 201) {\n\t\t\t\tElMessage({\n\t\t\t\t\tmessage: \"Done!\",\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t});\n\t\t\t\trouter.push({ path: \"/home\" });\n\t\t\t}\n\t\t});\n\t}\n}\nfunction goCancelAddNewPost() {\n\trouter.push({ path: \"/home/my_posts\" });\n}\n\nimport { QuillEditor, Quill } from \"@vueup/vue-quill\";\nimport ImageResize from \"quill-image-resize-vue\"; // Note, this doesn't use deconstruction\nimport { ImageDrop } from \"quill-image-drop-module\";\nQuill.register(\"modules/imageResize\", ImageResize);\nQuill.register(\"modules/imageDrop\", ImageDrop);\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\n\nconst customToolbarOptions = [\n\t[\"bold\", \"italic\", \"underline\", \"strike\"],\n\t[\"blockquote\", \"code-block\"],\n\t[{ header: 1 }, { header: 2 }],\n\t[{ list: \"ordered\" }, { list: \"bullet\" }],\n\t[{ script: \"sub\" }, { script: \"super\" }],\n\t[{ indent: \"-1\" }, { indent: \"+1\" }],\n\t[{ direction: \"rtl\" }],\n\t[{ size: [\"small\", false, \"large\", \"huge\"] }],\n\t[{ header: [1, 2, 3, 4, 5, 6, false] }],\n\t[{ color: [] }, { background: [] }],\n\t[{ font: [] }],\n\t[{ align: [] }],\n\t[\"link\", \"image\", \"video\"], // Add image and video options\n\t[\"clean\"],\n];\n\nconst editor_options = {\n\tmodules: {\n\t\timageResize: {\n\t\t\tdisplaySize: true,\n\t\t},\n\t\timageDrop: {},\n\t},\n};\n</script>\n\n<style>\n.save-post-button {\n\tbackground-color: #0c3f51;\n}\n.save-post-button:hover {\n\tbackground-color: #072733;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}