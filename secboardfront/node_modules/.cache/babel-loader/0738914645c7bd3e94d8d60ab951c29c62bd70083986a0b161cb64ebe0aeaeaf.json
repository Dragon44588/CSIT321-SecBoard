{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport api from \"@/api/APIs\";\nimport { useRouter } from \"vue-router\";\nimport { QuillEditor, Quill } from \"@vueup/vue-quill\";\nimport ImageResize from \"quill-image-resize-vue\"; // Note, this doesn't use deconstruction\nimport { ImageDrop } from \"quill-image-drop-module\";\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\nexport default {\n  __name: 'Add-new-post',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n    const myToken = window.sessionStorage.getItem(\"token\");\n    const myName = window.sessionStorage.getItem(\"name\");\n    const post_color_list = ref([\"lightgoldenrodyellow\", \"lightcoral\", \"lightcyan\", \"lightsalmon\"]);\n    const current_post_color = ref(post_color_list.value[0]);\n    function handle_post_color(color) {\n      return {\n        backgroundColor: color,\n        border: color === current_post_color.value ? \"1px solid black\" : \"none\"\n      };\n    }\n    const postTitle = ref();\n    const postContent = ref();\n    const postForm = reactive({\n      title: postTitle.value,\n      content: postContent.value,\n      post_color: current_post_color.value,\n      token: myToken,\n      name: myName\n    });\n    function goSavePost() {\n      if (rich_text.value === undefined) {\n        ElMessage({\n          message: \"Title or Content cannot be empty\",\n          type: \"warning\"\n        });\n        return;\n      }\n      const text = rich_text.value.ops.map(op => op.insert).join(\"\");\n      if (text === \"\") {\n        ElMessage({\n          message: \"Title or Content cannot be empty\",\n          type: \"warning\"\n        });\n      } else {\n        postForm.title = postTitle.value;\n        postForm.content = JSON.stringify(rich_text.value);\n        postForm.post_color = current_post_color.value;\n        api.addPost(postForm).then(res => {\n          if (res.status === 201) {\n            ElMessage({\n              message: \"Done!\",\n              type: \"success\"\n            });\n            router.push({\n              path: \"/home\"\n            });\n          }\n        });\n      }\n    }\n    function goCancelAddNewPost() {\n      router.push({\n        path: \"/home/my_posts\"\n      });\n    }\n    Quill.register(\"modules/imageResize\", ImageResize);\n    Quill.register(\"modules/imageDrop\", ImageDrop);\n    const customToolbarOptions = [[\"bold\", \"italic\", \"underline\", \"strike\"], [\"blockquote\", \"code-block\"], [{\n      header: 1\n    }, {\n      header: 2\n    }], [{\n      list: \"ordered\"\n    }, {\n      list: \"bullet\"\n    }], [{\n      script: \"sub\"\n    }, {\n      script: \"super\"\n    }], [{\n      indent: \"-1\"\n    }, {\n      indent: \"+1\"\n    }], [{\n      direction: \"rtl\"\n    }], [{\n      size: [\"small\", false, \"large\", \"huge\"]\n    }], [{\n      header: [1, 2, 3, 4, 5, 6, false]\n    }], [{\n      color: []\n    }, {\n      background: []\n    }], [{\n      font: []\n    }], [{\n      align: []\n    }], [\"link\", \"image\", \"video\"],\n    // Add image and video options\n    [\"clean\"]];\n    const rich_text = ref(undefined);\n    const editor_options = {\n      modules: {\n        imageResize: {\n          displaySize: true\n        },\n        imageDrop: {}\n      }\n    };\n    const __returned__ = {\n      router,\n      myToken,\n      myName,\n      post_color_list,\n      current_post_color,\n      handle_post_color,\n      postTitle,\n      postContent,\n      postForm,\n      goSavePost,\n      goCancelAddNewPost,\n      customToolbarOptions,\n      rich_text,\n      editor_options,\n      reactive,\n      ref,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get api() {\n        return api;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get QuillEditor() {\n        return QuillEditor;\n      },\n      get Quill() {\n        return Quill;\n      },\n      get ImageResize() {\n        return ImageResize;\n      },\n      get ImageDrop() {\n        return ImageDrop;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","ElMessage","api","useRouter","QuillEditor","Quill","ImageResize","ImageDrop","router","myToken","window","sessionStorage","getItem","myName","post_color_list","current_post_color","value","handle_post_color","color","backgroundColor","border","postTitle","postContent","postForm","title","content","post_color","token","name","goSavePost","rich_text","undefined","message","type","text","ops","map","op","insert","join","JSON","stringify","addPost","then","res","status","push","path","goCancelAddNewPost","register","customToolbarOptions","header","list","script","indent","direction","size","background","font","align","editor_options","modules","imageResize","displaySize","imageDrop"],"sources":["C:/Users/Azza/Desktop/CSIT321/CSIT321-SecBoard/secboardfront/src/components/HomepageComponents/Add-new-post.vue"],"sourcesContent":["<template>\r\n\t<div style=\"flex: 1; display: flex; flex-direction: column\">\r\n\t\t<div style=\"display: flex; justify-content: space-between; margin: 10px\">\r\n\t\t\t<div @click=\"goCancelAddNewPost\" style=\"height: 50px; width: 50px; cursor: pointer\">\r\n\t\t\t\t<img src=\"../../../public/close-outline.svg\" />\r\n\t\t\t</div>\r\n\t\t\t<div style=\"flex: 1; display: flex; justify-content: center; align-items: center; color: rgb(68, 68, 68)\">\r\n\t\t\t\t<h1>MAKING POST</h1>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"justify-content: flex-end; align-items: center; display: flex\">\r\n\t\t\t\t<strong style=\"margin-right: 10px\">Post Color</strong>\r\n\t\t\t\t<ul style=\"display: flex\">\r\n\t\t\t\t\t<li v-for=\"(color, index) in post_color_list\" :key=\"index\">\r\n\t\t\t\t\t\t<div @click=\"current_post_color = color\" style=\"margin-right: 10px; height: 30px; width: 30px; border-radius: 50%; cursor: pointer\" :style=\"handle_post_color(color)\"></div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div @click=\"goSavePost\" class=\"save-post-button\" style=\"display: flex; justify-content: center; align-items: center; margin-right: 20px; border-radius: 5px; cursor: pointer\">\r\n\t\t\t\t<strong style=\"width: 100px; color: white; font-size: 1.2em; font-weight: bold; border-radius: 5px; text-align: center\">Save</strong>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div style=\"flex: 1; display: flex; flex-direction: column\">\r\n\t\t\t<div style=\"height: 150px; padding: 30px\">\r\n\t\t\t\t<input v-model=\"postTitle\" placeholder=\"Title\" style=\"height: 100%; width: 100%; border: none; outline: none; background-color: #f7e4de; font-size: 2.8em; font-weight: bold\" />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div style=\"flex: 1; padding: 30px\">\r\n\t\t\t\t<p style=\"margin-bottom: 10px; color: rgb(80, 80, 80); font-size: 1.5em\">Content</p>\r\n\r\n\t\t\t\t<QuillEditor style=\"height: 80%\" v-model:content=\"rich_text\" theme=\"snow\" contentType=\"delta\" :toolbar=\"customToolbarOptions\" :options=\"editor_options\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport api from \"@/api/APIs\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter();\r\n\r\nconst myToken = window.sessionStorage.getItem(\"token\");\r\nconst myName = window.sessionStorage.getItem(\"name\");\r\n\r\nconst post_color_list = ref([\"lightgoldenrodyellow\", \"lightcoral\", \"lightcyan\", \"lightsalmon\"]);\r\nconst current_post_color = ref(post_color_list.value[0]);\r\n\r\nfunction handle_post_color(color) {\r\n\treturn {\r\n\t\tbackgroundColor: color,\r\n\t\tborder: color === current_post_color.value ? \"1px solid black\" : \"none\",\r\n\t};\r\n}\r\n\r\nconst postTitle = ref();\r\nconst postContent = ref();\r\nconst postForm = reactive({\r\n\ttitle: postTitle.value,\r\n\tcontent: postContent.value,\r\n\tpost_color: current_post_color.value,\r\n\ttoken: myToken,\r\n\tname: myName,\r\n});\r\n\r\nfunction goSavePost() {\r\n\tif (rich_text.value === undefined) {\r\n\t\tElMessage({\r\n\t\t\tmessage: \"Title or Content cannot be empty\",\r\n\t\t\ttype: \"warning\",\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst text = rich_text.value.ops.map((op) => op.insert).join(\"\");\r\n\tif (text === \"\") {\r\n\t\tElMessage({\r\n\t\t\tmessage: \"Title or Content cannot be empty\",\r\n\t\t\ttype: \"warning\",\r\n\t\t});\r\n\t} else {\r\n\t\tpostForm.title = postTitle.value;\r\n\t\tpostForm.content = JSON.stringify(rich_text.value);\r\n\t\tpostForm.post_color = current_post_color.value;\r\n\t\tapi.addPost(postForm).then((res) => {\r\n\t\t\tif (res.status === 201) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: \"Done!\",\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t});\r\n\t\t\t\trouter.push({ path: \"/home\" });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction goCancelAddNewPost() {\r\n\trouter.push({ path: \"/home/my_posts\" });\r\n}\r\n\r\nimport { QuillEditor, Quill } from \"@vueup/vue-quill\";\r\nimport ImageResize from \"quill-image-resize-vue\"; // Note, this doesn't use deconstruction\r\nimport { ImageDrop } from \"quill-image-drop-module\";\r\nQuill.register(\"modules/imageResize\", ImageResize);\r\nQuill.register(\"modules/imageDrop\", ImageDrop);\r\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\r\n\r\nconst customToolbarOptions = [\r\n\t[\"bold\", \"italic\", \"underline\", \"strike\"],\r\n\t[\"blockquote\", \"code-block\"],\r\n\t[{ header: 1 }, { header: 2 }],\r\n\t[{ list: \"ordered\" }, { list: \"bullet\" }],\r\n\t[{ script: \"sub\" }, { script: \"super\" }],\r\n\t[{ indent: \"-1\" }, { indent: \"+1\" }],\r\n\t[{ direction: \"rtl\" }],\r\n\t[{ size: [\"small\", false, \"large\", \"huge\"] }],\r\n\t[{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n\t[{ color: [] }, { background: [] }],\r\n\t[{ font: [] }],\r\n\t[{ align: [] }],\r\n\t[\"link\", \"image\", \"video\"], // Add image and video options\r\n\t[\"clean\"],\r\n];\r\n\r\nconst rich_text = ref(undefined);\r\n\r\nconst editor_options = {\r\n\tmodules: {\r\n\t\timageResize: {\r\n\t\t\tdisplaySize: true,\r\n\t\t},\r\n\t\timageDrop: {},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.save-post-button {\r\n\tbackground-color: #0c3f51;\r\n}\r\n.save-post-button:hover {\r\n\tbackground-color: #072733;\r\n}\r\n.currently-not-available {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tcolor: white;\r\n\tfont-size: 2em;\r\n\tposition: absolute;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tbackground-color: rgba(80, 78, 78, 0.573);\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}